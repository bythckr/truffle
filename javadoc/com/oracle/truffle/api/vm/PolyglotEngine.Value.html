<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_121) on Fri Feb 24 03:00:50 PST 2017 -->
<title>PolyglotEngine.Value</title>
<meta name="date" content="2017-02-24">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="PolyglotEngine.Value";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Language.html" title="class in com.oracle.truffle.api.vm"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/oracle/truffle/api/vm/PolyglotEngine.Value.html" target="_top">Frames</a></li>
<li><a href="PolyglotEngine.Value.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.oracle.truffle.api.vm</div>
<h2 title="Class PolyglotEngine.Value" class="title">Class PolyglotEngine.Value</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.oracle.truffle.api.vm.PolyglotEngine.Value</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Enclosing class:</dt>
<dd><a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.html" title="class in com.oracle.truffle.api.vm">PolyglotEngine</a></dd>
</dl>
<hr>
<br>
<pre>public abstract class <span class="typeNameLabel">PolyglotEngine.Value</span>
extends <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">A future value wrapper. A user level wrapper around values returned by evaluation of various
 <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.html" title="class in com.oracle.truffle.api.vm"><code>PolyglotEngine</code></a> functions like <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.html#findGlobalSymbol-java.lang.String-"><code>PolyglotEngine.findGlobalSymbol(String)</code></a> and
 <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.html#eval-com.oracle.truffle.api.source.Source-"><code>PolyglotEngine.eval(Source)</code></a> or a value returned by
 <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html#execute-java.lang.Object...-"><code>a subsequent execution</code></a>. In case the
 <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.html" title="class in com.oracle.truffle.api.vm"><code>PolyglotEngine</code></a> has been initialized for
 <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Builder.html#executor-java.util.concurrent.Executor-"><code>asynchronous execution</code></a>, the
 <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html" title="class in com.oracle.truffle.api.vm"><code>PolyglotEngine.Value</code></a> represents a future - i.e., it is returned immediately, leaving the execution
 running on behind.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>&lt;T&gt;&nbsp;T</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html#as-java.lang.Class-">as</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</a>&lt;T&gt;&nbsp;representation)</code>
<div class="block">Creates Java-typed foreign access to the object wrapped by this <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html" title="class in com.oracle.truffle.api.vm"><code>PolyglotEngine.Value</code></a>.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html" title="class in com.oracle.truffle.api.vm">PolyglotEngine.Value</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html#execute-java.lang.Object...-">execute</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>...&nbsp;args)</code>
<div class="block">Executes this value, depending on its content.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html#get--">get</a></span>()</code>
<div class="block">Returns the object represented by this value, possibly null.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="get--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;get()</pre>
<div class="block">Returns the object represented by this value, possibly null. The <em>raw</em> object can
 either be a wrapped primitive type (e.g. <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Number.html?is-external=true" title="class or interface in java.lang"><code>Number</code></a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang"><code>String</code></a>,
 <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Character.html?is-external=true" title="class or interface in java.lang"><code>Character</code></a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="class or interface in java.lang"><code>Boolean</code></a>) or a <a href="../../../../../com/oracle/truffle/api/interop/TruffleObject.html" title="interface in com.oracle.truffle.api.interop"><code>TruffleObject</code></a> representing more complex
 object created by a language.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the object, possibly <code>null</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code> - in case it is not possible to obtain the value of the object</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9</dd>
</dl>
</li>
</ul>
<a name="as-java.lang.Class-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>as</h4>
<pre>public&nbsp;&lt;T&gt;&nbsp;T&nbsp;as(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</a>&lt;T&gt;&nbsp;representation)</pre>
<div class="block">Creates Java-typed foreign access to the object wrapped by this <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html" title="class in com.oracle.truffle.api.vm"><code>PolyglotEngine.Value</code></a>. Results
 depend on the requested type:
 <ul>
 <li>For primitive types such as <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Number.html?is-external=true" title="class or interface in java.lang"><code>Number</code></a>, the value is simply cast and returned.
 </li>
 <li>A <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang"><code>String</code></a> is produced by the language that returned the value.</li>
 <li>A <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/FunctionalInterface.html?is-external=true" title="class or interface in java.lang"><code>FunctionalInterface</code></a> instance is returned if the value
 <a href="../../../../../com/oracle/truffle/api/interop/Message.html#IS_EXECUTABLE"><code>can be executed</code></a>.</li>
 <li>Aggregate types such as <a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util"><code>List</code></a> and <a href="http://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util"><code>Map</code></a> are supported, including when
 used in combination with nested generics.</li>
 </ul>

 <h5>Java interoperation examples</h5>
 <p>
 The method <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html#as-java.lang.Class-"><code>PolyglotEngine.Value.as(Class)</code></a> plays an essential role supporting
 interoperation between Java and guest languages. Examples demonstrating Java foreign
 access to JavaScript functions, simple objects, and classes appear in the method
 documentation for <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.html#eval-com.oracle.truffle.api.source.Source-"><code>PolyglotEngine.eval(Source)</code></a>. The examples here demonstrate Java
 foreign access to more complex data structures.
 <p>
 The examples use JavaScript as the guest language, assuming that a Truffle implementation
 of JavaScript is on the JVM class path. In each example a
 <a href="../../../../../com/oracle/truffle/api/source/Source.html#newBuilder-java.lang.String-"><code>Source</code></a> builder creates a literal fragment of JavaScript
 code.

 <h6>Java interop example: Java access to a JavaScript array with typed elements</h6>
 <p>
 This example demonstrates type-safe Java foreign access to members of a JavaScript array
 with members of a known type.
 <p>
 In this example a fragment of JavaScript code named <code>"ArrayOfPoints.js"</code> defines an
 anonymous function of no arguments. Evaluation of that code returns the JavaScript
 function wrapped in a <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html" title="class in com.oracle.truffle.api.vm"><code>PolyglotEngine.Value</code></a>. The method <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html#as-java.lang.Class-"><code>PolyglotEngine.Value.as(Class)</code></a> creates a Java
 object (an instance of functional interface <code>PointProvider</code>) that supports foreign
 calls to the JavaScript function. The JavaScript list returned by the function is made
 available as Java type <code>List&lt;Point&gt;</code>.


 <pre>
<b>interface</b> Point {
    <b>int</b> x();
    <b>int</b> y();
}

&#064;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/FunctionalInterface.html?is-external=true" title="class or interface in java.lang"><code>FunctionalInterface</code></a>
<b>interface</b> PointProvider {
    <a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util"><code>List</code></a>&lt;Point&gt; createPoints();
}

<b>public</b> <b>void</b> accessJavaScriptArrayWithTypedElementsFromJava() {
    <a href="../../../../../com/oracle/truffle/api/source/Source.html" title="class in com.oracle.truffle.api.source"><code>Source</code></a> src = <a href="../../../../../com/oracle/truffle/api/source/Source.html" title="class in com.oracle.truffle.api.source"><code>Source</code></a>.newBuilder(<em>"\n"</em>
        + <em>"(function() {\n"</em>
        + <em>"  class Point {\n"</em>
        + <em>"     constructor(x, y) {\n"</em>
        + <em>"       this.x = x;\n"</em>
        + <em>"       this.y = y;\n"</em>
        + <em>"     }\n"</em>
        + <em>"  }\n"</em>
        + <em>"  return [ new Point(30, 15), new Point(5, 7) ];\n"</em>
        + <em>"})\n"</em>
    ).name(<em>"ArrayOfPoints.js"</em>).mimeType(<em>"text/javascript"</em>).build();

    <em>// Evaluate the JavaScript function definition</em>
    <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html" title="class in com.oracle.truffle.api.vm"><code>PolyglotEngine.Value</code></a> jsFunction = engine.eval(src);

    <em>// Create Java-typed access to the JavaScript function</em>
    PointProvider pointProvider = jsFunction.as(PointProvider.<b>class</b>);

    <em>// Invoke the JavaScript function to generate points</em>
    <a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util"><code>List</code></a>&lt;Point&gt; points = pointProvider.createPoints();

    assertEquals(<em>"Two points"</em>, 2, points.size());

    Point first = points.get(0);
    assertEquals(30, first.x());
    assertEquals(15, first.y());

    Point second = points.get(1);
    assertEquals(5, second.x());
    assertEquals(7, second.y());
}
</pre>

 <h6>Java interop example: Java access to JavaScript JSON data</h6>

 This example demonstrates type-safe Java foreign access to a JavaScript JSON-like
 structure. The example is based on JSON data returned by a GitHub API.
 <p>
 The GitHub response contains a list of repository objects. Each repository has an id,
 name, list of URLs, and a nested structure describing its owner. Interfaces
 <code>Repository</code> and <code>Owner</code> define the structure as Java types.
 <p>
 In the example a fragment of Javascript code named <code>"github-api-value.js"</code> defines
 an anonymous function of no arguments. Evaluation of that code returns the JavaScript
 function, wrapped in a <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html" title="class in com.oracle.truffle.api.vm"><code>PolyglotEngine.Value</code></a> that can be (foreign) executed directly. Execution
 of that function returns a JavaScript mock JSON parser function, also wrapped in a
 <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html" title="class in com.oracle.truffle.api.vm"><code>Value</code></a>. The method <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html#as-java.lang.Class-"><code>PolyglotEngine.Value.as(Class)</code></a> creates a Java object (an
 instance of functional interface <code>ParseJSON</code>) that supports Java foreign calls to
 the JavaScript mock parser, producing results that can be inspected in a type-safe way.

 <pre>
<b>interface</b> Repository {
    <b>int</b> id();
    <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang"><code>String</code></a> name();
    Owner owner();
    <b>boolean</b> has_wiki();
    <a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util"><code>List</code></a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang"><code>String</code></a>&gt; urls();
}

<b>interface</b> Owner {
    <b>int</b> id();
    <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang"><code>String</code></a> login();
    <b>boolean</b> site_admin();
}

&#064;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/FunctionalInterface.html?is-external=true" title="class or interface in java.lang"><code>FunctionalInterface</code></a>
<b>interface</b> ParseJSON {
    <a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util"><code>List</code></a>&lt;Repository&gt; parse();
}

<b>public</b> <b>void</b> accessJavaScriptJSONObjectFromJava() {
    <a href="../../../../../com/oracle/truffle/api/source/Source.html" title="class in com.oracle.truffle.api.source"><code>Source</code></a> src = <a href="../../../../../com/oracle/truffle/api/source/Source.html" title="class in com.oracle.truffle.api.source"><code>Source</code></a>.newBuilder(
        <em>"(function () { \n"</em> +
        <em>"  return function() {\n"</em> +
        <em>"    return [\n"</em> +
        <em>"      {\n"</em> +
        <em>"        \"</em>id\<em>": 6109440,\n"</em> +
        <em>"        \"</em>name\<em>": \"</em>holssewebsocket\<em>",\n"</em> +
        <em>"        \"</em>owner\<em>": {\n"</em> +
        <em>"          \"</em>login\<em>": \"</em>jersey\<em>",\n"</em> +
        <em>"          \"</em>id\<em>": 399710,\n"</em> +
        <em>"          \"</em>site_admin\<em>": false\n"</em> +
        <em>"        },\n"</em> +
        <em>"        \"</em>urls\<em>": [\n"</em> +
        <em>"          \"</em>https:<em>//api.github.com/repos/jersey/hol\",\n" +</em>
        <em>"          \"</em>https:<em>//api.github.com/repos/jersey/hol/forks\",\n" +</em>
        <em>"          \"</em>https:<em>//api.github.com/repos/jersey/hol/teams\",\n" +</em>
        <em>"        ],\n"</em> +
        <em>"        \"</em>has_wiki\<em>": true\n"</em> +
        <em>"      }\n"</em> +
        <em>"    ]\n"</em> +
        <em>"  };\n"</em> +
        <em>"})\n"</em>
    ).name(<em>"github-api-value.js"</em>).mimeType(<em>"text/javascript"</em>).build();

    <em>// Evaluate the JavaScript function definition</em>
    <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html" title="class in com.oracle.truffle.api.vm"><code>PolyglotEngine.Value</code></a> jsFunction = engine.eval(src);

    <em>// Execute the JavaScript function to create the "mock parser"</em>
    <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html" title="class in com.oracle.truffle.api.vm"><code>PolyglotEngine.Value</code></a> jsMockParser = jsFunction.execute();

    <em>// Create Java-typed access to the "mock parser"</em>
    ParseJSON mockParser = jsMockParser.as(ParseJSON.<b>class</b>);

    <a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util"><code>List</code></a>&lt;Repository&gt; repos = mockParser.parse();
    assertEquals(<em>"One repo"</em>, 1, repos.size());
    assertEquals(<em>"holssewebsocket"</em>, repos.get(0).name());
    assertTrue(<em>"wiki"</em>, repos.get(0).has_wiki());
    assertEquals(<em>"3 urls"</em>, 3, repos.get(0).urls().size());
    <b>final</b> <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang"><code>String</code></a> url1 = repos.get(0).urls().get(0);
    assertEquals(<em>"1st"</em>, <em>"https://api.github.com/repos/jersey/hol"</em>, url1);

    Owner owner = repos.get(0).owner();
    assertNotNull(<em>"Owner exists"</em>, owner);

    assertEquals(<em>"login"</em>, <em>"jersey"</em>, owner.login());
    assertEquals(<em>"id"</em>, 399710, owner.id());
    assertFalse(owner.site_admin());
}

</pre>

 <p>
 Other examples of Java to dynamic language interop can be found in documentation of
 <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.html#eval-com.oracle.truffle.api.source.Source-"><code>PolyglotEngine.eval(Source)</code></a> and <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html#execute-java.lang.Object...-"><code>PolyglotEngine.Value.execute(Object...)</code></a> methods.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the type of the requested view</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>representation</code> - an interface describing the requested access (must be an interface)</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>instance of the view wrapping the object of this value</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code> - in case it is not possible to obtain the value of the object</dd>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/ClassCastException.html?is-external=true" title="class or interface in java.lang">ClassCastException</a></code> - if the value cannot be converted to desired view</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9</dd>
</dl>
</li>
</ul>
<a name="execute-java.lang.Object...-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>execute</h4>
<pre>public&nbsp;<a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html" title="class in com.oracle.truffle.api.vm">PolyglotEngine.Value</a>&nbsp;execute(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>...&nbsp;args)</pre>
<div class="block">Executes this value, depending on its content.
 <ul>

 <li>If the value represents a function, makes a <em>foreign function call</em> using
 appropriate Java arguments. See <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.html" title="class in com.oracle.truffle.api.vm">"Truffle-Java Interoperation"</a>
 for the implications of making Java data available to guest languages.</li>

 <li>If the value represents a field, then sets the field to the value of the first
 argument, if provided, and returns the (possibly new) value of the field.</li>
 </ul>

 <h5>Java interoperation examples</h5>
 <p>
 The method <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html#execute-java.lang.Object...-"><code>PolyglotEngine.Value.execute(Object...)</code></a> plays an essential role
 supporting interoperation between Java and guest languages. The examples here demonstrate
 JavaScript foreign access to Java elements. Access in the other direction, Java foreign
 access to JavaScript elements appear in method documentation for
 <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.html#eval-com.oracle.truffle.api.source.Source-"><code>PolyglotEngine.eval(Source)</code></a> and <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html#as-java.lang.Class-"><code>PolyglotEngine.Value.as(Class)</code></a>.
 <p>
 The examples use JavaScript as the guest language, assuming that a Truffle implementation
 of JavaScript is on the JVM class path. In each example a
 <a href="../../../../../com/oracle/truffle/api/source/Source.html#newBuilder-java.lang.String-"><code>Source</code></a> builder creates a literal fragment of JavaScript
 code.

 <h6>Java interop example: JavaScript access to Java object fields and methods</h6>

 This example shows how to expose <em>public</em> members of Java objects to scripts
 written in dynamic languages. In the example a JavaScript function is able to access
 fields in (foreign) Java objects of type <code>Moment</code>.
 <p>
 Evaluating the JavaScript code fragment named <code>"MomentToSeconds.js"</code> produces a
 JavaScript function of one argument wrapped in a <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html" title="class in com.oracle.truffle.api.vm"><code>PolyglotEngine.Value</code></a>. This can be (foreign)
 executed, as shown, which returns a JavaScript number wrapped in a <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html" title="class in com.oracle.truffle.api.vm"><code>PolyglotEngine.Value</code></a>.
 Converting the result to Java requires using the method <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html#as-java.lang.Class-"><code>PolyglotEngine.Value.as(Class)</code></a>.

 <pre>
<b>public</b> <b>static</b> <b>final</b> <b>class</b> Moment {
    <b>public</b> <b>final</b> <b>int</b> hours;
    <b>public</b> <b>final</b> <b>int</b> minutes;
    <b>public</b> <b>final</b> <b>int</b> seconds;

    <b>public</b> Moment(<b>int</b> hours, <b>int</b> minutes, <b>int</b> seconds) {
        <b>this</b>.hours = hours;
        <b>this</b>.minutes = minutes;
        <b>this</b>.seconds = seconds;
    }
}

<b>public</b> <b>void</b> accessFieldsOfJavaObject() {
    <a href="../../../../../com/oracle/truffle/api/source/Source.html" title="class in com.oracle.truffle.api.source"><code>Source</code></a> src = <a href="../../../../../com/oracle/truffle/api/source/Source.html" title="class in com.oracle.truffle.api.source"><code>Source</code></a>.newBuilder(<em>"\n"</em>
        + <em>"(function(t) {\n"</em>
        + <em>"  return 3600 * t.hours + 60 * t.minutes + t.seconds;\n"</em>
        + <em>"})\n"</em>
    ).name(<em>"MomentToSeconds.js"</em>).mimeType(<em>"text/javascript"</em>).build();

    <b>final</b> Moment m = <b>new</b> Moment(6, 30, 10);

    <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html" title="class in com.oracle.truffle.api.vm"><code>PolyglotEngine.Value</code></a> jsFunction = engine.eval(src); <em>// Evaluate JS function def.</em>
    <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html" title="class in com.oracle.truffle.api.vm"><code>PolyglotEngine.Value</code></a> jsSeconds = jsFunction.execute(m); <em>// Execute JS function</em>
    <b>int</b> seconds = jsSeconds.as(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Number.html?is-external=true" title="class or interface in java.lang"><code>Number</code></a>.<b>class</b>).intValue(); <em>// Convert result</em>

    assertEquals(3600 * 6 + 30 * 60 + 10, seconds);
}
</pre>

 The explicit conversion of the result type in the above example can be avoided by
 explicitly converting the type of the <em>foreign function</em> instead. In the following
 variation, the JavaScript function is given the Java functional type
 <code>MomentConvertor</code>, which returns a Java <code>int</code>.

 <pre>
&#064;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/FunctionalInterface.html?is-external=true" title="class or interface in java.lang"><code>FunctionalInterface</code></a>
<b>interface</b> MomentConverter {
    <b>int</b> toSeconds(Moment moment);
}

<b>public</b> <b>void</b> accessFieldsOfJavaObjectWithConverter() {
    <a href="../../../../../com/oracle/truffle/api/source/Source.html" title="class in com.oracle.truffle.api.source"><code>Source</code></a> src = <a href="../../../../../com/oracle/truffle/api/source/Source.html" title="class in com.oracle.truffle.api.source"><code>Source</code></a>.newBuilder(<em>"\n"</em>
        + <em>"(function(t) {\n"</em>
        + <em>"  return 3600 * t.hours + 60 * t.minutes + t.seconds;\n"</em>
        + <em>"})\n"</em>
    ).name(<em>"MomentToSeconds.js"</em>).mimeType(<em>"text/javascript"</em>).build();

    <b>final</b> Moment m = <b>new</b> Moment(6, 30, 10);

    <b>final</b> <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html" title="class in com.oracle.truffle.api.vm"><code>PolyglotEngine.Value</code></a> jsFunction = engine.eval(src); <em>// Evaluate JS function def.</em>
    MomentConverter converter =
                 jsFunction.as(MomentConverter.<b>class</b>); <em>// Convert function</em>
    <b>int</b> seconds = converter.toSeconds(m);         <em>// Execute Java function</em>

    assertEquals(3600 * 6 + 30 * 60 + 10, seconds);
}
</pre>

 <h6>Java interop example: JavaScript access to Java static methods and constructors</h6>

 Dynamic languages can also access <em>public static methods</em> and <em>public
 constructors</em> of any Java class for which they are provided a reference. In this
 example a JavaScript function (created by evaluating the JavaScript code fragment named
 <code>"ConstructMoment.js"</code>) creates a JavaScript factory for a Java class passed to it
 as an argument. The JavaScript factory (foreign) invokes the Java class constructor and
 returns the new Java object instance wrapped in a <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html" title="class in com.oracle.truffle.api.vm"><code>PolyglotEngine.Value</code></a>.

 <pre>
<b>interface</b> MomentFactory {
    Moment create(<b>int</b> h, <b>int</b> m, <b>int</b> s);
}

<b>public</b> <b>void</b> createJavaScriptFactoryForJavaClass() {
    <a href="../../../../../com/oracle/truffle/api/source/Source.html" title="class in com.oracle.truffle.api.source"><code>Source</code></a> src = <a href="../../../../../com/oracle/truffle/api/source/Source.html" title="class in com.oracle.truffle.api.source"><code>Source</code></a>.newBuilder(<em>"\n"</em>
        + <em>"(function(Moment) {\n"</em>
        + <em>"  return function(h, m, s) {\n"</em>
        + <em>"     return new Moment(h, m, s);\n"</em>
        + <em>"  };\n"</em>
        + <em>"})\n"</em>
    ).name(<em>"ConstructMoment.js"</em>).mimeType(<em>"text/javascript"</em>).build();

    <em>// Evaluate the JavaScript function definition</em>
    <b>final</b> <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html" title="class in com.oracle.truffle.api.vm"><code>PolyglotEngine.Value</code></a> jsFunction = engine.eval(src);

    <em>// Create a JavaScript factory for the provided Java class</em>
    <b>final</b> <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html" title="class in com.oracle.truffle.api.vm"><code>PolyglotEngine.Value</code></a> jsFactory = jsFunction.execute(Moment.<b>class</b>);

    <em>// Create Java-typed access to the JavaScript factory</em>
    MomentFactory momentFactory = jsFactory.as(MomentFactory.<b>class</b>);

    <b>final</b> Moment m = momentFactory.create(6, 30, 10);
    assertEquals(<em>"Hours"</em>, 6, m.hours);
    assertEquals(<em>"Minutes"</em>, 30, m.minutes);
    assertEquals(<em>"Seconds"</em>, 10, m.seconds);
}
</pre>

 <p>
 Additional examples of Java/dynamic language interoperation can be found in description
 of <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.html#eval-com.oracle.truffle.api.source.Source-"><code>PolyglotEngine.eval(Source)</code></a> and <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html#as-java.lang.Class-"><code>Value.as(Class)</code></a> methods.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>args</code> - arguments to pass when executing the value</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>result of the execution wrapped in a non-null <a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Value.html" title="class in com.oracle.truffle.api.vm"><code>PolyglotEngine.Value</code></a></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code> - signals problem during execution</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../com/oracle/truffle/api/vm/PolyglotEngine.Language.html" title="class in com.oracle.truffle.api.vm"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/oracle/truffle/api/vm/PolyglotEngine.Value.html" target="_top">Frames</a></li>
<li><a href="PolyglotEngine.Value.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
